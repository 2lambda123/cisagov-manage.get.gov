{% extends "domain_base.html" %}
{% load static field_helpers url_helpers %}

{% block title %}DNSSEC | {{ domain.name }} | {% endblock %}

{% block domain_content %}

  <h1>DNSSEC</h1>

  <p>DNSSEC, or DNS Security Extensions, is additional security layer to protect your website. Enabling DNSSEC ensures that when someone visits your website, they can be certain that it's connecting to the correct server, preventing potential hijacking or tampering with your domain's records. <a href="https://www.icann.org/resources/pages/dnssec-what-is-it-why-important-2019-03-05-en">Read more about DNSSEC and why it is important.</a></p>

  <form class="usa-form usa-form--large" method="post">
    {% csrf_token %}
    {% if domain.has_dnssec_records %}
    <div class="usa-alert usa-alert--info usa-alert--slim margin-bottom-3">
      <div class="usa-alert__body">
      In order to fully disable DNSSEC on your domain, you will need to work with your DNS provider to remove your DNSSEC-related records from your zone.
      </div>
    </div>
    <a
      href="#example-modal-1"
      class="usa-button"
      aria-controls="example-modal-1"
      data-open-modal
      >Disable DNSSEC</a
    >
    {% else %}
    <div id="step-1">
      <div class="usa-alert usa-alert--info usa-alert--slim margin-bottom-3">
        <div class="usa-alert__body">
        It is strongly recommended that you do not enable this unless you fully understand DNSSEC and know how to set it up properly. If you make a mistake, it could cause your domain name to stop working.
        </div>
      </div>
      <button
          type="button"
          class="usa-button"
          name="enable_dnssec"
          id="toggler1"
      >Enable DNSSEC</button>
    </div>

    <div id="step-2" class="display-none">
      <h2> Add DS Records </h2>
      <p>In order to enable DNSSEC and add Delegation Signer (DS) records, you must first configure it with your DNS hosting service. Your configuration will determine whether you need to add DS Data or Key Data. Contact your DNS hosting provider if you are unsure which record type to add.</p>
      <p>
        <a href="{% url 'domain-dns-dnssec-dsdata' pk=domain.id %}" class="usa-button usa-button--outline">Add DS Data</a>
        <a href="{% url 'domain-dns-dnssec-keydata' pk=domain.id %}" class="usa-button usa-button--outline">Add Key Data</a>
        <button
          type="button"
          class="usa-button usa-button--unstyled"
          name="cancel"
          id="toggler2"
      >Cancel</button>
      </p>
    </div>
    
    

    

    
    {% endif %}
  </form>

  <div
    class="usa-modal"
    id="example-modal-1"
    aria-labelledby="modal-1-heading"
    aria-describedby="modal-1-description"
  >
      {% include 'includes/modal.html' with modal_heading="Are you sure you want to continue?" modal_description="Your DNSSEC records will be deleted from the registry." modal_button=modal_button|safe %}
  </div>


  {% comment %} <div
      class="usa-modal"
      id="example-modal-1"
      aria-labelledby="modal-1-heading"
      aria-describedby="modal-1-description"
    >
      <div class="usa-modal__content">
        <div class="usa-modal__main">
          <h2 class="usa-modal__heading" id="modal-1-heading">
            Are you sure you want to continue?
          </h2>
          <div class="usa-prose">
            <p id="modal-1-description">
              Your DNSSEC records will be deleted from the registry.
            </p>
          </div>

          
          <div class="usa-modal__footer">
            <ul class="usa-button-group">
              <li class="usa-button-group__item">
                <form method="post">
                  {% csrf_token %}
                  <button
                      type="submit"
                      class="usa-button"
                      name="disable_dnssec"
                  >Disable DNSSEC</button>
                </form>
              </li>
              <li class="usa-button-group__item">
                <button
                  type="button"
                  class="usa-button usa-button--unstyled padding-105 text-center"
                  data-close-modal
                >
                  Cancel
                </button>
              </li>
            </ul>
          </div>
        </div>
        <button
          type="button"
          class="usa-button usa-modal__close"
          aria-label="Close this window"
          data-close-modal
        >
          <svg class="usa-icon" aria-hidden="true" focusable="false" role="img">
            <use xlink:href="/assets/img/sprite.svg#close"></use>
          </svg>
        </button>
      </div>
    </div> {% endcomment %}
  

{% endblock %}  {# domain_content #}
