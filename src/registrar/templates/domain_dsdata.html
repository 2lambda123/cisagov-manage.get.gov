{% extends "domain_base.html" %}
{% load static field_helpers url_helpers %}

{% block title %}DS Data | {{ domain.name }} | {% endblock %}

{% block domain_content %}
  {% if domain.dnssecdata is None %}
  <div class="usa-alert usa-alert--info usa-alert--slim margin-bottom-3">
    <div class="usa-alert__body">
      You have no DS Data added. Enable DNSSEC by adding DS Data.
    </div>
  </div>
  {% endif %}

  {% for form in formset %}
    {% include "includes/form_errors.html" with form=form %}
  {% endfor %}

  <h1>DS Data</h1>

  <p>In order to enable DNSSEC, you must first configure it with your DNS hosting service.</p>

  <p>Enter the values given by your DNS provider for DS Data.</p>
  {% include "includes/required_fields.html" %}

  <form class="usa-form usa-form--extra-large" method="post" novalidate id="form-container">
    {% csrf_token %}
    {{ formset.management_form }}

    {% for form in formset %}
    <fieldset class="ds-record">

      <legend class="sr-only">DS Data record {{forloop.counter}}</legend>

      <h2 class="margin-top-0">DS Data record {{forloop.counter}}</h2>

      <div class="grid-row grid-gap-2 flex-end">
        <div class="tablet:grid-col-4">
          {% with attr_required=True add_group_class="usa-form-group--unstyled-error" %}
            {% input_with_errors form.key_tag %}
          {% endwith %}
        </div>
        <div class="tablet:grid-col-4">
          {% with attr_required=True add_group_class="usa-form-group--unstyled-error" %}
            {% input_with_errors form.algorithm %}
          {% endwith %}
        </div>
        <div class="tablet:grid-col-4">
          {% with attr_required=True add_group_class="usa-form-group--unstyled-error" %}
            {% input_with_errors form.digest_type %}
          {% endwith %}
        </div>
      </div>

      <div class="grid-row">
        <div class="grid-col">
          {% with attr_required=True add_group_class="usa-form-group--unstyled-error" %}
            {% input_with_errors form.digest %}
          {% endwith %}
        </div>
      </div>

      <div class="grid-row margin-top-1">
        <div class="grid-col">
          <button type="button" class="usa-button usa-button--unstyled display-block float-right-tablet delete-record">
            <svg class="usa-icon" aria-hidden="true" focusable="false" role="img" width="24" height="24">
              <use xlink:href="{%static 'img/sprite.svg'%}#delete"></use>
            </svg><span class="margin-left-05">Delete</span>
          </button>
        </div>
      </div>

    </fieldset>
    {% endfor %}

    <button type="button" class="usa-button usa-button--unstyled display-block margin-bottom-2" id="add-ds-form">
      <svg class="usa-icon" aria-hidden="true" focusable="false" role="img" width="24" height="24">
        <use xlink:href="{%static 'img/sprite.svg'%}#add_circle"></use>
      </svg><span class="margin-left-05">Add new record</span>
    </button>

    <button
          type="submit"
          class="usa-button"
      >Save
    </button>
  </form>

  <form aria-label="form to undo changes to the DS records">
    <button
          type="submit"
          class="usa-button usa-button--outline btn-cancel"
          name="btn-cancel-click"
          aria-label="Reset the data in the DS records to the registry state (undo changes)"
      >Cancel
    </button>
  </form>

{% endblock %}  {# domain_content #}
